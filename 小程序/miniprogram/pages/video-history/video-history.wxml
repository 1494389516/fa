<view class="container">
  <!-- é¡¶éƒ¨ç­›é€‰æ  -->
  <view class="filter-bar">
    <scroll-view class="filter-scroll" scroll-x="true">
      <view class="filter-item {{filterType === 'all' ? 'active' : ''}}" 
            data-type="all" bindtap="onFilterChange">
        å…¨éƒ¨
      </view>
      <view class="filter-item {{filterType === 'today' ? 'active' : ''}}" 
            data-type="today" bindtap="onFilterChange">
        ä»Šå¤©
      </view>
      <view class="filter-item {{filterType === 'week' ? 'active' : ''}}" 
            data-type="week" bindtap="onFilterChange">
        æœ¬å‘¨
      </view>
      <view class="filter-item {{filterType === 'month' ? 'active' : ''}}" 
            data-type="month" bindtap="onFilterChange">
        æœ¬æœˆ
      </view>
    </scroll-view>
    
    <!-- åšä¸»ç­›é€‰ -->
    <view class="blogger-filter">
      <view wx:if="{{selectedBlogger}}" class="selected-blogger">
        <text class="blogger-name">{{selectedBlogger.name}}</text>
        <view class="clear-btn" bindtap="onClearBloggerFilter">Ã—</view>
      </view>
      <view wx:else class="select-blogger-btn" bindtap="onSelectBlogger">
        é€‰æ‹©åšä¸»
      </view>
    </view>
  </view>

  <!-- è§†é¢‘åˆ—è¡¨ -->
  <view class="video-list">
    <!-- åŠ è½½çŠ¶æ€ -->
    <view wx:if="{{loading}}" class="loading-container">
      <view class="loading-spinner"></view>
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:elif="{{videos.length === 0}}" class="empty-state">
      <image src="/images/empty-video.png" class="empty-icon" mode="aspectFit" />
      <view class="empty-title">æš‚æ— è§†é¢‘æ›´æ–°</view>
      <view class="empty-desc">
        {{selectedBlogger ? 'è¯¥åšä¸»æš‚æ— è§†é¢‘æ›´æ–°' : 'è¿˜æ²¡æœ‰ç›‘æ§åˆ°ä»»ä½•è§†é¢‘æ›´æ–°'}}
      </view>
    </view>

    <!-- è§†é¢‘é¡¹ -->
    <view wx:else>
      <view class="video-item" 
            wx:for="{{videos}}" 
            wx:key="_id"
            data-video="{{item}}"
            bindtap="onVideoTap">
        
        <!-- è§†é¢‘å°é¢ -->
        <view class="video-cover">
          <image src="{{item.cover}}" class="cover-image" mode="aspectFill" />
          <view class="duration">{{item.formattedDuration}}</view>
          <view class="play-icon">â–¶</view>
        </view>

        <!-- è§†é¢‘ä¿¡æ¯ -->
        <view class="video-info">
          <!-- åšä¸»ä¿¡æ¯ -->
          <view class="blogger-info" 
                data-blogger="{{item.blogger}}"
                bindtap="onBloggerTap"
                catchtap="onBloggerTap">
            <image src="{{item.blogger.avatar}}" class="blogger-avatar" mode="aspectFill" />
            <text class="blogger-name">{{item.blogger.nickname}}</text>
            <view class="verified-icon" wx:if="{{item.blogger.isVerified}}">âœ“</view>
          </view>

          <!-- è§†é¢‘æ ‡é¢˜ -->
          <view class="video-title">{{item.title}}</view>

          <!-- è§†é¢‘æè¿° -->
          <view class="video-desc" wx:if="{{item.description}}">
            {{item.description}}
          </view>

          <!-- ç»Ÿè®¡æ•°æ® -->
          <view class="video-stats">
            <view class="stat-item">
              <text class="stat-icon">ğŸ‘</text>
              <text class="stat-text">{{item.formattedStats.playCount}}</text>
            </view>
            <view class="stat-item">
              <text class="stat-icon">â¤ï¸</text>
              <text class="stat-text">{{item.formattedStats.likeCount}}</text>
            </view>
            <view class="stat-item">
              <text class="stat-icon">ğŸ’¬</text>
              <text class="stat-text">{{item.formattedStats.commentCount}}</text>
            </view>
            <view class="stat-item">
              <text class="stat-icon">ğŸ“¤</text>
              <text class="stat-text">{{item.formattedStats.shareCount}}</text>
            </view>
          </view>

          <!-- æ—¶é—´ä¿¡æ¯ -->
          <view class="time-info">
            <text class="publish-time">å‘å¸ƒï¼š{{item.formattedPublishTime}}</text>
            <text class="detect-time">å‘ç°ï¼š{{item.formattedTime}}</text>
          </view>
        </view>
      </view>

      <!-- åŠ è½½æ›´å¤š -->
      <view wx:if="{{hasMore}}" class="load-more">
        <view wx:if="{{loadingMore}}" class="loading-more">
          <view class="loading-spinner small"></view>
          <text>åŠ è½½æ›´å¤š...</text>
        </view>
        <view wx:else class="load-more-tip">ä¸Šæ‹‰åŠ è½½æ›´å¤š</view>
      </view>

      <!-- æ²¡æœ‰æ›´å¤š -->
      <view wx:else class="no-more">
        <text>æ²¡æœ‰æ›´å¤šè§†é¢‘äº†</text>
      </view>
    </view>
  </view>
</view>