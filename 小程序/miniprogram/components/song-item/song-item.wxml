<!-- components/song-item/song-item.wxml - Ê≠åÊõ≤Êù°ÁõÆÁªÑ‰ª∂Ê®°Êùø -->
<view class="song-item {{itemStyle}} {{isRead ? 'read' : 'unread'}} {{isFavorited ? 'favorited' : ''}}"
      bindtap="onSongTap"
      bindlongpress="onSongLongPress">
  
  <!-- Êú™ËØªÊåáÁ§∫Âô® -->
  <view class="unread-indicator" wx:if="{{!isRead}}"></view>
  
  <!-- Ê≠åÊõ≤Â∞ÅÈù¢ -->
  <view class="cover-section">
    <view class="cover-container">
      <image class="cover-image {{imageLoaded ? 'loaded' : ''}}"
             src="{{formattedSong.coverUrl}}"
             mode="aspectFill"
             bindload="onCoverLoad"
             binderror="onCoverError">
      </image>
      
      <!-- Âä†ËΩΩÂç†‰ΩçÁ¨¶ -->
      <view class="cover-placeholder" wx:if="{{!imageLoaded}}">
        <view class="placeholder-icon">üéµ</view>
      </view>
      
      <!-- Êó∂ÈïøÊ†áÁ≠æ -->
      <view class="duration-label" wx:if="{{formattedSong.durationText}}">
        {{formattedSong.durationText}}
      </view>
      
      <!-- Êí≠ÊîæÊåâÈíÆ -->
      <view class="play-button {{isPlaying ? 'playing' : ''}}" bindtap="onPlayTap">
        <view class="play-icon">{{isPlaying ? '‚è∏' : '‚ñ∂'}}</view>
      </view>
      
      <!-- ËØ≠Ë®ÄÊ†áËØÜ -->
      <view class="language-badge" wx:if="{{formattedSong.languageText}}">
        {{formattedSong.languageText}}
      </view>
    </view>
  </view>

  <!-- ÂÜÖÂÆπÂå∫Âüü -->
  <view class="content-section">
    <!-- Ê†áÈ¢òÂíå‰∏ìËæë -->
    <view class="title-section">
      <text class="song-title">{{formattedSong.titleText}}</text>
      <text class="album-name" wx:if="{{formattedSong.albumName}}"> - {{formattedSong.albumName}}</text>
    </view>

    <!-- Ê≠åÊâã‰ø°ÊÅØ -->
    <view class="artist-section" wx:if="{{showArtist}}" bindtap="onArtistTap">
      <image class="artist-avatar" 
             src="{{formattedSong.artistAvatar}}" 
             mode="aspectFill">
      </image>
      <text class="artist-name">{{formattedSong.artistName}}</text>
    </view>

    <!-- ÂèëÂ∏ÉÊó∂Èó¥ -->
    <view class="time-section">
      <text class="release-time">{{formattedSong.releaseTimeText}}</text>
    </view>

    <!-- ÁªüËÆ°Êï∞ÊçÆ -->
    <view class="stats-section" wx:if="{{showStats}}">
      <view class="stat-item" wx:if="{{formattedSong.playCountText !== '0'}}">
        <view class="stat-icon">üéß</view>
        <text class="stat-text">{{formattedSong.playCountText}}</text>
      </view>
      <view class="stat-item" wx:if="{{formattedSong.likeCountText !== '0'}}">
        <view class="stat-icon">‚ù§Ô∏è</view>
        <text class="stat-text">{{formattedSong.likeCountText}}</text>
      </view>
      <view class="stat-item" wx:if="{{formattedSong.commentCountText !== '0'}}">
        <view class="stat-icon">üí¨</view>
        <text class="stat-text">{{formattedSong.commentCountText}}</text>
      </view>
    </view>
  </view>

  <!-- Êìç‰ΩúÊåâÈíÆ -->
  <view class="action-section">
    <!-- Êî∂ËóèÊåâÈíÆ -->
    <view class="action-button favorite-btn {{isFavorited ? 'favorited' : ''}}" bindtap="onFavoriteTap">
      <view class="action-icon">{{isFavorited ? '‚ù§Ô∏è' : 'ü§ç'}}</view>
    </view>
    
    <!-- Êõ¥Â§öÊìç‰Ωú -->
    <view class="action-button more-btn" wx:if="{{itemStyle === 'card'}}">
      <view class="action-icon">‚ãØ</view>
      
      <!-- ‰∏ãÊãâËèúÂçï -->
      <view class="action-menu">
        <view class="menu-item" bindtap="onShareTap">
          <view class="menu-icon">üì§</view>
          <text class="menu-text">ÂàÜ‰∫´</text>
        </view>
        <view class="menu-item" bindtap="onDownloadTap">
          <view class="menu-icon">‚¨áÔ∏è</view>
          <text class="menu-text">‰∏ãËΩΩ</text>
        </view>
      </view>
    </view>
  </view>

  <!-- Êî∂ËóèÁä∂ÊÄÅÊåáÁ§∫ -->
  <view class="favorite-indicator" wx:if="{{isFavorited}}">
    <view class="favorite-glow"></view>
  </view>

  <!-- Èü≥‰πêÊ≥¢Á∫πÊïàÊûú -->
  <view class="music-waves" wx:if="{{isPlaying}}">
    <view class="wave wave-1"></view>
    <view class="wave wave-2"></view>
    <view class="wave wave-3"></view>
  </view>
</view>